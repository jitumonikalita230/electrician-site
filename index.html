<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sparky Electrical | Expert Wiring & Repairs</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap');

        :root { 
            --main: #ffcc00; 
            --dark: #0f172a; 
            --slate: #1e293b;
            --light: #f8fafc;
            --accent-grad: linear-gradient(135deg, #ffcc00 0%, #f59e0b 100%);
        }
        
        * { box-sizing: border-box; }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            margin: 0; 
            background: var(--light); 
            color: var(--dark); 
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        .container { max-width: 1200px; margin: auto; padding: 0 20px; }

        /* --- HERO SECTION --- */
        .hero { 
            background: var(--dark); 
            color: white; 
            padding: 120px 20px; 
            text-align: center; 
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at center, rgba(255, 204, 0, 0.1) 0%, transparent 70%);
        }

        .hero h1 { font-size: clamp(2.5rem, 8vw, 4rem); margin: 0; letter-spacing: -2px; color: var(--main); position: relative; }
        .hero p { font-size: 1.2rem; opacity: 0.9; max-width: 600px; margin: 20px auto; position: relative; }
        
        .cta-hero {
            display: inline-flex; align-items: center; gap: 10px; padding: 18px 40px; 
            background: var(--main); color: var(--dark);
            text-decoration: none; border-radius: 50px; font-weight: 800; margin-top: 20px;
            transition: 0.3s; box-shadow: 0 10px 20px rgba(255, 204, 0, 0.3);
            position: relative;
        }
        .cta-hero:hover { transform: translateY(-3px); box-shadow: 0 15px 25px rgba(255, 204, 0, 0.4); }

        /* --- PROFILE SECTION --- */
        .section-tag { text-align: center; font-weight: 800; color: #94a3b8; text-transform: uppercase; letter-spacing: 2px; font-size: 0.8rem; margin-bottom: 10px; display: block; }
        
        #Editorial-board { margin: -60px auto 40px; position: relative; z-index: 10; }

        .profile-card-1 {
            background: white; border-radius: 30px; padding: 40px; text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.06); max-width: 450px; margin: auto;
            border: 1px solid rgba(0,0,0,0.05);
        }

        .image1 {
            width: 140px; height: 140px; border-radius: 50%; overflow: hidden;
            margin: 0 auto 20px; border: 5px solid var(--main); box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .image1 img { width: 100%; height: 100%; object-fit: cover; }
        
        .profile-info { display: flex; justify-content: center; gap: 20px; font-size: 0.9rem; color: #64748b; margin: 20px 0; padding: 15px; background: #f8fafc; border-radius: 15px; }
        .profile-info i { color: var(--main); font-size: 1.2rem; }

        /* --- GALLERY --- */
        .gallery-header { margin: 80px 0 40px; text-align: center; }
        .gallery-header h2 { font-size: 2.5rem; margin: 0; letter-spacing: -1px; }

        .gallery { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; 
        }

        .card { 
            background: white; border-radius: 24px; overflow: hidden; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.03); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid #f1f5f9;
        }
        
        .card:hover { transform: translateY(-10px); box-shadow: 0 25px 40px rgba(0,0,0,0.1); }
        .card img { width: 100%; height: 250px; object-fit: cover; }
        .card-body { padding: 25px; }
        .card-body h3 { margin: 0 0 10px 0; font-size: 1.3rem; color: var(--dark); }
        .card-body p { color: #64748b; font-size: 0.95rem; line-height: 1.5; }

        /* --- CONTACT FORM --- */
        .contact-wrapper {
            background: var(--dark); border-radius: 40px; padding: 80px 60px; margin: 100px 0;
            color: white; display: grid; grid-template-columns: 1fr 1.2fr; gap: 60px; align-items: start;
        }

        @media (max-width: 992px) { 
            .contact-wrapper { grid-template-columns: 1fr; padding: 40px 25px; margin: 60px 0; }
            .hero { padding: 80px 20px; }
        }

        .contact-text h2 { font-size: 2.8rem; margin: 0 0 20px; color: var(--main); letter-spacing: -1px; }
        .contact-text p { opacity: 0.8; font-size: 1.1rem; margin-bottom: 40px; }

        .contact-items { display: grid; gap: 20px; }
        .contact-item { display: flex; align-items: center; gap: 15px; font-size: 1.1rem; }
        .contact-item i { width: 45px; height: 45px; background: rgba(255,204,0,0.1); color: var(--main); display: flex; align-items: center; justify-content: center; border-radius: 12px; font-size: 1.4rem; }

        .form-box { background: var(--slate); padding: 35px; border-radius: 30px; box-shadow: 0 20px 40px rgba(0,0,0,0.2); }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 8px; font-size: 0.9rem; color: #94a3b8; font-weight: 600; }
        
        input, textarea { 
            width: 100%; padding: 16px; background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 14px; color: white;
            font-family: inherit; font-size: 1rem; transition: 0.3s;
        }
        input:focus, textarea:focus { border-color: var(--main); outline: none; background: rgba(255,255,255,0.1); box-shadow: 0 0 0 4px rgba(255,204,0,0.1); }

        .btn-submit { 
            background: var(--main); color: var(--dark); border: none; padding: 20px; 
            width: 100%; font-size: 1.1rem; font-weight: 800; cursor: pointer; border-radius: 14px; 
            transition: 0.3s; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn-submit:hover { background: #ffda47; transform: translateY(-2px); }

        /* --- FLOATING CALL BUTTON (MOBILE) --- */
        .floating-call {
            position: fixed; bottom: 30px; right: 30px; z-index: 100;
            background: var(--main); color: var(--dark); width: 60px; height: 60px;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 30px; box-shadow: 0 10px 25px rgba(255,204,0,0.4);
            text-decoration: none; animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,204,0,0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255,204,0,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,204,0,0); }
        }

        footer { padding: 80px 20px; text-align: center; background: #fff; border-top: 1px solid #e2e8f0; }
        .footer-socials { margin: 30px 0; }
        .footer-socials a { font-size: 28px; color: var(--dark); margin: 0 15px; transition: 0.3s; }
        .footer-socials a:hover { color: var(--main); transform: translateY(-3px); display: inline-block; }
        
        .admin-link {
            text-decoration: none; color: #94a3b8; font-size: 0.8rem; font-weight: 600;
            margin-top: 40px; display: inline-block; padding: 10px 20px; 
            border: 1px solid #e2e8f0; border-radius: 10px; transition: 0.3s;
        }
        .admin-link:hover { background: var(--dark); color: white; border-color: var(--dark); }
    </style>
</head>
<body>

<a href="tel:+919957245963" class="floating-call" title="Call Us Now">
    <i class='bx bxs-phone-call'></i>
</a>

<section class="hero">
    <div class="container">
        <span style="background: rgba(255,204,0,0.1); color: var(--main); padding: 8px 20px; border-radius: 50px; font-weight: 800; font-size: 0.8rem; text-transform: uppercase; margin-bottom: 20px; display: inline-block;">Available 24/7 in Guwahati</span>
        <h1>⚡ Sparky Electrical</h1>
        <p>Reliable, safe, and professional electrical services for your home and business. From emergency repairs to full rewiring.</p>
        <a href="#contact-sec" class="cta-hero">Get a Free Consultation <i class='bx bx-right-arrow-alt'></i></a>
    </div>
</section>

<div class="container">
    
    <section id="Editorial-board">
        <span class="section-tag">Your Master Electrician</span>
        <div class="profile-card-1">
            <div class="image1">
                <img src="hod.png" alt="Jitumoni Kalita" onerror="this.src='https://via.placeholder.com/150?text=JK'">
            </div>
            <h3 style="margin-bottom:5px;">Jitumoni Kalita</h3>
            <p style="color:var(--main); font-weight:800; margin: 0;">Certified Master Electrician</p>
            
            <div class="profile-info">
                <span><i class='bx bxs-badge-check'></i> Licensed</span>
                <span><i class='bx bxs-briefcase'></i> 5+ Yrs Exp</span>
            </div>
            
            <a href="tel:+919957245963" style="text-decoration:none; display:flex; align-items:center; justify-content:center; gap:12px; color:var(--dark); font-weight:800; font-size: 1.2rem; background: var(--main); padding: 15px; border-radius: 15px; transition: 0.3s;">
                <i class='bx bxs-phone-call'></i> +91 99572 45963
            </a>
        </div>
    </section>

    <div class="gallery-header">
        <span class="section-tag">Our Portfolio</span>
        <h2>Recent Quality Work</h2>
    </div>
    
    <div id="gallery" class="gallery">
        <div style="grid-column: 1/-1; text-align: center; padding: 50px; color: #94a3b8;">
            <i class='bx bx-loader-alt bx-spin' style="font-size: 2rem;"></i>
            <p>Loading projects...</p>
        </div>
    </div>

    <section id="contact-sec" class="contact-wrapper">
        <div class="contact-text">
            <h2>Book a Service</h2>
            <p>Need an urgent repair or planning a new installation? Send us your details and we'll provide a competitive quote within 24 hours.</p>
            
            <div class="contact-items">
                <div class="contact-item">
                    <i class='bx bxs-map-pin'></i>
                    <span>Guwahati, Assam, India</span>
                </div>
                <div class="contact-item">
                    <i class='bx bxs-phone'></i>
                    <span>+91 8822763566</span>
                </div>
                <div class="contact-item">
                    <i class='bx bxs-envelope'></i>
                    <span>jitumoni2005@gmail.com</span>
                </div>
            </div>
        </div>
        
        <div class="form-box">
            <form id="customerForm">
                <input type="hidden" name="type" value="customer">
                
                <div class="form-group">
                    <label>Your Name</label>
                    <input type="text" name="name" placeholder="John Doe" required>
                </div>

                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="text" name="phone" placeholder="+91 XXXXX XXXXX" required>
                </div>

                <div class="form-group">
                    <label>Email Address</label>
                    <input type="email" name="email" placeholder="john@example.com" required>
                </div>
    <div class="form-group">
            <label>Work Location (Area Name)</label>
            <input type="text" name="location" id="locInput" placeholder="e.g. Beltola" required>
        </div>

        <div class="form-group">
            <label>Calculate Travel Cost</label>
            <button type="button" onclick="getLocation()" id="gpsBtn" style="width:100%; padding:12px; background:rgba(255,255,255,0.1); color:var(--main); border:1px dashed var(--main); border-radius:12px; cursor:pointer; font-weight:800; margin-bottom:10px;">
                <i class='bx bx-target-lock'></i> Use My Current Location
            </button>
            
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
                <div>
                    <label style="font-size:0.7rem;">DISTANCE (KM)</label>
                    <input type="text" name="distance" id="userDist" value="0" readonly>
                </div>
                <div>
                    <label style="font-size:0.7rem;">EST. QUOTE (₹)</label>
                    <input type="text" name="quote" id="userQuote" readonly style="background:var(--main); color:var(--dark); font-weight:800;">
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Describe the Task</label>
            <textarea name="message" rows="3" required></textarea>
        </div>

       
    </form>
</div>

                <button type="submit" class="btn-submit" id="sendBtn">
                    Submit Inquiry <i class='bx bx-send'></i>
                </button>
            </form>
        </div>
    </section>
</div>

<footer>
    <h2 style="color: var(--dark); font-weight: 800; margin-bottom: 10px;">⚡ Sparky</h2>
    <p style="color: #64748b;">Providing safety and brightness to Guwahati since 2019.</p>
    
    <div class="footer-socials">
        <a href="https://github.com/jitumonikalita230" target="_blank"><i class='bx bxl-github'></i></a>
        <a href="mailto:jitumoni2005@gmail.com"><i class='bx bxl-gmail'></i></a>
        <a href="https://www.linkedin.com/in/jitumoni-kalita-b14a04308" target="_blank"><i class='bx bxl-linkedin'></i></a>
    </div>

    <p style="font-size: 0.9rem; color: #94a3b8;">&copy; 2026 Sparky Electrical Services. Designed by Jitumoni Kalita</p>
    
    <a href="owner.html" class="admin-link">Staff Login</a>
</footer>

<script>
    // URL for Google Apps Script
const URL = 'https://script.google.com/macros/s/AKfycbwo22W2Idb-zje6T0DupJRDWZNL67I7LXy8iawszUUNKcQ_woYGAjexf5Fz5ViEci25/exec';

// 1. YOUR SHOP COORDINATES (Guwahati Shop Location)
const SHOP_LAT = 26.128466936701948; 
const SHOP_LON =91.69378059579945;

/**
 * Automatically fetch user location and calculate distance
 */
async function autoCalculateDistance() {
    const distInput = document.getElementById('userDist');
    const quoteInput = document.getElementById('userQuote');
    const btn = document.getElementById('gpsBtn');

    if (!navigator.geolocation) {
        alert("Geolocation is not supported by your browser.");
        return;
    }

    // Check if running on a secure context
    if (window.location.protocol === 'file:') {
        alert("GPS does not work when opening the file directly. Please use a Local Server (like Live Server in VS Code) or upload to a website (HTTPS).");
        return;
    }

    btn.innerHTML = "<i class='bx bx-loader-alt bx-spin'></i> Locating...";

    navigator.geolocation.getCurrentPosition(
        (position) => {
            const userLat = position.coords.latitude;
            const userLon = position.coords.longitude;
            const distance = calculateHaversine(SHOP_LAT, SHOP_LON, userLat, userLon);
            
            distInput.value = distance.toFixed(2);
            const total = 300 + (distance * 15);
            quoteInput.value = Math.round(total);

            btn.innerHTML = "<i class='bx bx-check-circle'></i> Location Verified";
            btn.style.background = "#10b981";
            btn.style.color = "white";
        }, 
        (err) => {
            console.error(err);
            if (err.code === 1) {
                alert("Permission Denied. Please allow location access in your browser settings.");
            } else {
                alert("Location error: " + err.message);
            }
            btn.innerHTML = "<i class='bx bx-target-lock'></i> Retry GPS";
        },
        { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
    );
}

/**
 * Mathematical formula for 'as-the-crow-flies' distance
 */
function calculateHaversine(lat1, lon1, lat2, lon2) {
    const R = 6371; // Earth's radius in KM
    const dLat = (lat2 - lat1) * Math.PI / 180;
    const dLon = (lon2 - lon1) * Math.PI / 180;
    const a = 
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon/2) * Math.sin(dLon/2);
    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    return R * c; 
}



/**
 * Load Gallery with improved error handling and empty states
 */
async function loadGallery() {
    const galleryDiv = document.getElementById('gallery');
    try {
        const res = await fetch(URL);
        const data = await res.json();
        
        if (!data || data.length === 0) {
            galleryDiv.innerHTML = `
                <div style='grid-column:1/-1; text-align:center; padding:40px; color:#94a3b8;'>
                    <i class='bx bx-image-alt' style='font-size:3rem;'></i>
                    <p>No projects to show right now.</p>
                </div>`;
            return;
        }

        // Optimized rendering: Build string first, then inject once
        const html = data.reverse().map(item => `
            <div class="card">
                <img src="${item.img || 'https://via.placeholder.com/400x300?text=Sparky+Work'}" 
                     alt="${item.title}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x300?text=Image+Error'">
                <div class="card-body">
                    <h3>${item.title || 'Untitled Project'}</h3>
                    <p>${item.desc || 'Quality electrical installation by Sparky.'}</p>
                </div>
            </div>
        `).join('');
        
        galleryDiv.innerHTML = html;
    } catch (e) {
        galleryDiv.innerHTML = "<p style='grid-column:1/-1; text-align:center; padding:40px; color:red;'>Check your internet connection and try again.</p>";
    }
}

/**
 * Form submission with improved UX
 */
document.getElementById('customerForm').onsubmit = async (e) => {
    e.preventDefault();
    const btn = document.getElementById('sendBtn');
    const originalText = btn.innerHTML;
    
    // UI Feedback
    btn.innerHTML = "<i class='bx bx-loader-alt bx-spin'></i> Submitting Inqury...";
    btn.disabled = true;

    try {
        const formData = new URLSearchParams(new FormData(e.target));
        const response = await fetch(URL, { 
            method: 'POST', 
            mode: 'no-cors', 
            body: formData 
        });

        // Since mode is no-cors, we assume success if no error is thrown
        alert("Thank you! Jitumoni has received your request and will call you back shortly.");
        e.target.reset();
        
        // Reset Quote/Distance displays if needed
        document.getElementById('userDist').value = "0";
        document.getElementById('userQuote').value = "";
        
    } catch (err) {
        console.error("Submission error:", err);
        alert("Submission failed. Please call +91 99572 45963 directly.");
    } finally {
        btn.innerHTML = originalText;
        btn.disabled = false;
    }
};

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    loadGallery();
});
</script>
</body>
</html>